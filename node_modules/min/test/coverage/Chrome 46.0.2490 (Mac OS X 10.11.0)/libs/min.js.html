<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for libs/min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">libs/</a> min.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">2.49% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>38/1525</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0.39% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>5/1277</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0.16% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/640</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>2/2</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span></td><td class="text"><pre class="prettyprint lang-js">/*!
 * MinDB (version 0.1.12) - Database on JavaScript
 * 
 * Will Wen Gunn(iwillwen) and other contributors
 * 
 * @license MIT-license
 * @copyright 2012-2015 iwillwen(willwengunn@gmail.com)
 */
!function(e,t){"object"==typeof exports&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >"object"==typeof module?<span class="branch-0 cbranch-no" title="branch not covered" ></span>module.exports=t():</span>"function"==typeof define&amp;&amp;define.amd?define("min",[],t):<span class="branch-1 cbranch-no" title="branch not covered" >"object"==typeof exports?exports.min=t():e.min=t()}</span>(this,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(e){<span class="fstat-no" title="function not covered" ></span>function t(r){<span class="cstat-no" title="statement not covered" ></span>if(n[r])<span class="cstat-no" title="statement not covered" >return n[r].exports;<span class="cstat-no" title="statement not covered" >v</span></span>ar i=n[r]={exports:{},id:r,loaded:!1};<span class="cstat-no" title="statement not covered" >r</span>eturn e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}<span class="cstat-no" title="statement not covered" ></span>var n={};<span class="cstat-no" title="statement not covered" >r</span>eturn t.m=e,t.c=n,t.p="",t(0)}</span>([<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(1)["default"]}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="cstat-no" title="statement not covered" ></span>var i=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&amp;&amp;(n.push(s.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,u=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n){<span class="cstat-no" title="statement not covered" ></span>if(Array.isArray(t))<span class="cstat-no" title="statement not covered" >return t;<span class="cstat-no" title="statement not covered" >i</span></span>f(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}</span>();<span class="cstat-no" title="statement not covered" >O</span>bject.defineProperty(t,"__esModule",{value:!0}),n(2);<span class="cstat-no" title="statement not covered" >v</span>ar u=n(21),s=r(u),o=n(22),a=n(23),l=r(a),c=n(24),f=r(c),h=n(25),v=r(h),m=n(26),g=r(m),d=n(27),y=r(d),p=n(28),w=r(p),j=n(29),b=s["default"].noop,x={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=x,s["default"].extend(x,o.EventEmitter.prototype),x.EventEmitter=o.EventEmitter,x.Promise=o.Promise,x.memStore=j.memStore,x.localStore=j.localStore,x.store=new j.localStore;<span class="cstat-no" title="statement not covered" >v</span>ar _=x._keys={},k=null,P={0:"mix",1:"hash",2:"list",3:"set",4:"zset"};<span class="cstat-no" title="statement not covered" >x</span>.fork=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e={},t=Object.getOwnPropertyNames(this),n=0;n&lt;t.length;n++){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >t</span>his.hasOwnProperty(r)&amp;&amp;(e[r]=this[r])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn e}</span>,x.del=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?b:arguments[1],r=new o.Promise(b);<span class="cstat-no" title="statement not covered" >r</span>.then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>t.emit("del",e),k&amp;&amp;clearTimeout(k),k=setTimeout(t.save.bind(t),1e3)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar i=this.store,u="min-"+e;<span class="cstat-no" title="statement not covered" >i</span>f(i.async){<span class="cstat-no" title="statement not covered" >var s=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>i.remove(u,<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return i?(r.reject(i),n(i)):(delete t._keys[e],r.resolve(e),void n(null,e))}</span>)}</span>;<span class="cstat-no" title="statement not covered" >i</span>.ready?s():i.on("ready",s)}</span>else <span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >i.remove(u),delete this._keys[e],r.resolve(e),n(null,e)}</span>catch(a){<span class="cstat-no" title="statement not covered" >r.reject(a),n(a)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn r}</span>,x.exists=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?b:arguments[1],n=new o.Promise;<span class="cstat-no" title="statement not covered" >e</span>="min-"+e;<span class="cstat-no" title="statement not covered" >v</span>ar r=<span class="fstat-no" title="function not covered" >function(e,r){<span class="cstat-no" title="statement not covered" ></span>return e||!r?(n.resolve(!1),t(null,!1)):(n.resolve(!0),void t(null,!0))}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(this.store.async)<span class="cstat-no" title="statement not covered" >this.store.get(e,r);e</span>lse{<span class="cstat-no" title="statement not covered" >var i=this.store.get(e);<span class="cstat-no" title="statement not covered" >r</span>(null,i)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}</span>,x.renamenx=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?b:arguments[2],i=new o.Promise(b);<span class="cstat-no" title="statement not covered" >i</span>.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>n.emit("rename",e,t),k&amp;&amp;clearTimeout(k),k=setTimeout(n.save.bind(n),5e3)}</span>);<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >var u=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>,s=null,a=null;<span class="cstat-no" title="statement not covered" >t</span>his.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new Error("no such key");<span class="cstat-no" title="statement not covered" >u</span>(r)}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return s=n._keys[e],a=t,n.del(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.set(t,a,r)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n._keys[t]=s,i.resolve("OK"),r(null,"OK")}</span>,u)}</span>catch(l){<span class="cstat-no" title="statement not covered" >u(l)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i}</span>,x.rename=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?b:arguments[2],i=new o.Promise(b);<span class="cstat-no" title="statement not covered" >i</span>.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>n.emit("rename",e,t),k&amp;&amp;clearTimeout(k),k=setTimeout(n.save.bind(n),5e3)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar u=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn e==t?u(new Error("The key is equal to the new key.")):this.renamenx.apply(this,arguments).then(i.resolve.bind(i),i.reject.bind(i)),i}</span>,x.keys=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?b:arguments[1],n=new o.Promise,r=Object.keys(this._keys),i=e.replace("?","(.)").replace("*","(.*)");<span class="cstat-no" title="statement not covered" >i</span>=new RegExp(i);<span class="cstat-no" title="statement not covered" >f</span>or(var u=[],s=0;s&lt;r.length;s++)<span class="cstat-no" title="statement not covered" >r[s].match(i)&amp;&amp;u.push(r[s]);<span class="cstat-no" title="statement not covered" >r</span></span>eturn n.resolve(u),t(null,u),n}</span>,x.randomkey=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=arguments.length&lt;=0||void 0===arguments[0]?b:arguments[0],t=new o.Promise(b),n=Object.keys(this._keys),r=Math.round(Math.random()*(n.length-1)),i=n[r];<span class="cstat-no" title="statement not covered" >r</span>eturn t.resolve(i),e(null,i),t}</span>,x.type=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?b:arguments[1],n=new o.Promise(b);<span class="cstat-no" title="statement not covered" >r</span>eturn this._keys.hasOwnProperty(e)?(n.resolve(P[this._keys[e]]),t(null,t)):(n.resolve(null),t(null,null)),n}</span>,x.empty=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(t){<span class="cstat-no" title="statement not covered" ></span>t?i.del(t,<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>t||s++,e(u.shift())}</span>):(r.resolve(s),n(null,s))}<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=0||void 0===arguments[0]?b:arguments[0],r=new o.Promise,i=this,u=Object.keys(this._keys),s=0;<span class="cstat-no" title="statement not covered" >r</span>eturn r.then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.emit("empty",e),k&amp;&amp;clearTimeout(k),k=setTimeout(t.save.bind(t),5e3)}</span>),e(u.shift()),r}</span>,x.save=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?b:arguments[0],n=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn n.then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>var n=i(t,2),r=n[0],u=n[1];<span class="cstat-no" title="statement not covered" >e</span>.emit("save",r,u)}</span>),this.set("min_keys",JSON.stringify(this._keys)).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return e.dump()}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var r=i(e,2),u=r[0],s=r[1];<span class="cstat-no" title="statement not covered" >n</span>.resolve([u,s]),t(u,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.reject(e),t(e)}</span>),n}</span>,x.dump=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?b:arguments[0],n=null,r=new o.Promise,i={};<span class="cstat-no" title="statement not covered" >r</span>eturn this.keys("*",<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>return u?(r.reject(u),t(u)):void(n=<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >e.get(u).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i[u]=e,n(s.shift())}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),t(e)}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var o=JSON.stringify(i);<span class="cstat-no" title="statement not covered" >r</span>.resolve([i,o]),t(null,i,o)}</span>}</span>)(s.shift())}</span>),r}</span>,x.restore=<span class="fstat-no" title="function not covered" >function(e){<span class="fstat-no" title="function not covered" ></span>function t(n){<span class="cstat-no" title="statement not covered" ></span>n?u.set(n,e[n]).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t(s.shift())}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>):a()}<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=1||void 0===arguments[1]?b:arguments[1],i=new o.Promise,u=this;<span class="cstat-no" title="statement not covered" >i</span>.then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.save(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.emit("restore")}</span>)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar s=Object.keys(e),a=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.exists("min_keys").then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e?n.get("min_keys"):(i.resolve(),void r())}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>_=JSON.parse(e),i.resolve(),r()}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.rejeect(e),r(e)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn t(s.shift()),i}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar O={};<span class="cstat-no" title="statement not covered" >x</span>.watch=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this;<span class="cstat-no" title="statement not covered" >"</span>undefined"==typeof n&amp;&amp;t.apply&amp;&amp;(n=t,t="set");<span class="cstat-no" title="statement not covered" >v</span>ar i=Math.random().toString(32).substr(2);<span class="cstat-no" title="statement not covered" >r</span>eturn O[e]||(O[e]={}),O[e][i]=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>for(var i,u=arguments.length,s=Array(u&gt;1?u-1:0),o=1;u&gt;o;o++)<span class="cstat-no" title="statement not covered" >s[o-1]=arguments[o];<span class="cstat-no" title="statement not covered" >t</span></span>===e&amp;&amp;(i=n).call.apply(i,[r].concat(s))}</span>,O[e][i].command=t,this.on(t,O[e][i]),i}</span>,x.unwatch=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>"undefined"==typeof n&amp;&amp;t&amp;&amp;(n=t,t="set"),this.removeListener(t,O[e][n])}</span>,x.unwatchForKey=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=O[e];<span class="cstat-no" title="statement not covered" >f</span>or(var n in t){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >t</span>his.removeListener(r.command,r)}</span>}</span>,s["default"].extend(x,f["default"]),s["default"].extend(x,v["default"]),s["default"].extend(x,g["default"]),s["default"].extend(x,y["default"]),s["default"].extend(x,w["default"]),s["default"].extend(x,l["default"]);<span class="cstat-no" title="statement not covered" >v</span>ar S=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>if(e||!t)<span class="cstat-no" title="statement not covered" >return void(x._keys={});<span class="cstat-no" title="statement not covered" >t</span></span>ry{<span class="cstat-no" title="statement not covered" >x._keys=JSON.parse(keys)}</span>catch(e){<span class="cstat-no" title="statement not covered" >x._keys={}}</span>}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(x.store.async)<span class="cstat-no" title="statement not covered" >x.store.get("min-min_keys",S);e</span>lse <span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var E=x.store.get("min-min_keys");<span class="cstat-no" title="statement not covered" >S</span>(null,E)}</span>catch(A){<span class="cstat-no" title="statement not covered" >S(A)}</span>}</span></span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >n(3)()||Object.defineProperty(n(4),"Symbol",{value:n(5),configurable:!0,enumerable:!1,writable:!0})}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e;<span class="cstat-no" title="statement not covered" >i</span>f("function"!=typeof Symbol)<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >e</span></span>=Symbol("test symbol");<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >String(e)}</span>catch(t){<span class="cstat-no" title="statement not covered" >return!1}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=new Function("return this")()}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r,i,u,s=n(6),o=n(19),a=Object.create,l=Object.defineProperties,c=Object.defineProperty,f=Object.prototype,h=a(null);<span class="cstat-no" title="statement not covered" >"</span>function"==typeof Symbol&amp;&amp;(r=Symbol);<span class="cstat-no" title="statement not covered" >v</span>ar v=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=a(null);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>for(var n,r,i=0;e[t+(i||"")];)<span class="cstat-no" title="statement not covered" >++i;<span class="cstat-no" title="statement not covered" >r</span></span>eturn t+=i||"",e[t]=!0,n="@@"+t,c(f,n,s.gs(null,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r||(r=!0,c(this,n,s(e)),r=!1)}</span>)),n}</span>}</span>();<span class="cstat-no" title="statement not covered" >u</span>=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(this instanceof u)<span class="cstat-no" title="statement not covered" >throw new TypeError("TypeError: Symbol is not a constructor");<span class="cstat-no" title="statement not covered" >r</span></span>eturn i(e)}</span>,e.exports=i=<span class="fstat-no" title="function not covered" >function m(e){<span class="cstat-no" title="statement not covered" ></span>var t;<span class="cstat-no" title="statement not covered" >i</span>f(this instanceof m)<span class="cstat-no" title="statement not covered" >throw new TypeError("TypeError: Symbol is not a constructor");<span class="cstat-no" title="statement not covered" >r</span></span>eturn t=a(u.prototype),e=void 0===e?"":String(e),l(t,{__description__:s("",e),__name__:s("",v(e))})}</span>,l(i,{"for":s(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return h[e]?h[e]:h[e]=i(String(e))}</span>),keyFor:s(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t;<span class="cstat-no" title="statement not covered" >o</span>(e);<span class="cstat-no" title="statement not covered" >f</span>or(t in h)<span class="cstat-no" title="statement not covered" >if(h[t]===e)<span class="cstat-no" title="statement not covered" >return t}</span></span></span>),hasInstance:s("",r&amp;&amp;r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&amp;&amp;r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&amp;&amp;r.iterator||i("iterator")),match:s("",r&amp;&amp;r.match||i("match")),replace:s("",r&amp;&amp;r.replace||i("replace")),search:s("",r&amp;&amp;r.search||i("search")),species:s("",r&amp;&amp;r.species||i("species")),split:s("",r&amp;&amp;r.split||i("split")),toPrimitive:s("",r&amp;&amp;r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&amp;&amp;r.toStringTag||i("toStringTag")),unscopables:s("",r&amp;&amp;r.unscopables||i("unscopables"))}),l(u.prototype,{constructor:s(i),toString:s("",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this.__name__}</span>)}),l(i.prototype,{toString:s(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"Symbol ("+o(this).__description__+")"}</span>),valueOf:s(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return o(this)}</span>)}),c(i.prototype,i.toPrimitive,s("",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return o(this)}</span>)),c(i.prototype,i.toStringTag,s("c","Symbol")),c(u.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive])),c(u.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag]))}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r,i=n(7),u=n(14),s=n(15),o=n(16);<span class="cstat-no" title="statement not covered" >r</span>=e.exports=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n,r,s,a,l;<span class="cstat-no" title="statement not covered" >r</span>eturn arguments.length&lt;2||"string"!=typeof e?(a=t,t=e,e=null):a=arguments[2],null==e?(n=s=!0,r=!1):(n=o.call(e,"c"),r=o.call(e,"e"),s=o.call(e,"w")),l={value:t,configurable:n,enumerable:r,writable:s},a?i(u(a),l):l}</span>,r.gs=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r,a,l,c;<span class="cstat-no" title="statement not covered" >r</span>eturn"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(r=!0,a=!1):(r=o.call(e,"c"),a=o.call(e,"e")),c={get:t,set:n,configurable:r,enumerable:a},l?i(u(l),c):c}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(8)()?Object.assign:n(9)}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e,t=Object.assign;<span class="cstat-no" title="statement not covered" >r</span>eturn"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r=n(10),i=n(13),u=Math.max;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n,s,o,a=u(arguments.length,2);<span class="cstat-no" title="statement not covered" >f</span>or(e=Object(i(e)),o=function(r){try{e[r]=t[r]}catch(i){n||(n=i)}},s=1;a&gt;s;++s)<span class="cstat-no" title="statement not covered" >t=arguments[s],r(t).forEach(o);<span class="cstat-no" title="statement not covered" >i</span></span>f(void 0!==n)<span class="cstat-no" title="statement not covered" >throw n;<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(11)()?Object.keys:n(12)}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >return Object.keys("primitive"),!0}</span>catch(e){<span class="cstat-no" title="statement not covered" >return!1}</span>}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n=Object.keys;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n(null==e?e:Object(e))}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(null==e)<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot use null or undefined");<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n=Array.prototype.forEach,r=Object.create,i=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n;<span class="cstat-no" title="statement not covered" >f</span>or(n in e)<span class="cstat-no" title="statement not covered" >t[n]=e[n]}</span></span>;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=r(null);<span class="cstat-no" title="statement not covered" >r</span>eturn n.call(arguments,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>null!=e&amp;&amp;i(Object(e),t)}</span>),t}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return"function"==typeof e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(17)()?String.prototype.contains:n(18)}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n="razdwatrzy";<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&amp;&amp;n.contains("foo")===!1}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n=String.prototype.indexOf;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.call(this,e,arguments[1])&gt;-1}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r=n(20);<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(!r(e))<span class="cstat-no" title="statement not covered" >throw new TypeError(e+" is not a symbol");<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={noop:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!1}</span>,inherits:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}</span>,extend:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=arguments.length,n=Array(t&gt;1?t-1:0),r=1;t&gt;r;r++)<span class="cstat-no" title="statement not covered" >n[r-1]=arguments[r];<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0,u=n.length;u&gt;i;i++)<span class="cstat-no" title="statement not covered" >for(var s=Object.getOwnPropertyNames(n[i]||{}),o=0;o&lt;s.length;o++)<span class="cstat-no" title="statement not covered" >e[s[o]]=n[i][s[o]];<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn e}</span>,isNumber:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return"[object Number]"==toString.call(e)}</span>,isUndefined:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return void 0===e}</span>,isObject:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e===Object(e)}</span>,arrayUnique:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t={},n=[],r=0,i=e.length;i&gt;r;++r)<span class="cstat-no" title="statement not covered" >(!t.hasOwnProperty(e[r])||utils.isObject(e[r]))&amp;&amp;(n.push(e[r]),t[e[r]]=1);<span class="cstat-no" title="statement not covered" >r</span></span>eturn n}</span>,arrayInter:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=arguments.length,n=Array(t&gt;1?t-1:0),r=1;t&gt;r;r++)<span class="cstat-no" title="statement not covered" >n[r-1]=arguments[r];<span class="cstat-no" title="statement not covered" >r</span></span>eturn utils.arrayUnique(e).filter(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=!0,r=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){<span class="cstat-no" title="statement not covered" >var a=s.value;<span class="cstat-no" title="statement not covered" >a</span>.indexOf(e)&lt;0&amp;&amp;(t=!1)}</span>}</span>catch(l){<span class="cstat-no" title="statement not covered" >i=!0,u=l}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>)}</span>,arrayDiff:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=arguments.length,n=Array(t&gt;1?t-1:0),r=1;t&gt;r;r++)<span class="cstat-no" title="statement not covered" >n[r-1]=arguments[r];<span class="cstat-no" title="statement not covered" >r</span></span>eturn e.filter(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=!0,r=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){<span class="cstat-no" title="statement not covered" >var a=s.value;<span class="cstat-no" title="statement not covered" >a</span>.indexOf(e)&gt;=0&amp;&amp;(t=!1)}</span>}</span>catch(l){<span class="cstat-no" title="statement not covered" >i=!0,u=l}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>)}</span>,flatten:<span class="fstat-no" title="function not covered" >function(e){<span class="fstat-no" title="function not covered" ></span>function t(t,n,r,i){<span class="cstat-no" title="statement not covered" ></span>return e.apply(this,arguments)}<span class="cstat-no" title="statement not covered" ></span>return t.toString=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return e.toString()}</span>,t}</span>(<span class="fstat-no" title="function not covered" >function(e,t,n,r){<span class="cstat-no" title="statement not covered" ></span>for(var i=[],u=0,s=r||0,o=getLength(e);o&gt;s;s++){<span class="cstat-no" title="statement not covered" >var a=e[s];<span class="cstat-no" title="statement not covered" >i</span>f(isArrayLike(a)&amp;&amp;(_.isArray(a)||_.isArguments(a))){<span class="cstat-no" title="statement not covered" >t||(a=flatten(a,t,n));<span class="cstat-no" title="statement not covered" >v</span>ar l=0,c=a.length;<span class="cstat-no" title="statement not covered" >f</span>or(i.length+=c;c&gt;l;)<span class="cstat-no" title="statement not covered" >i[u++]=a[l++]}</span></span>else <span class="cstat-no" title="statement not covered" >n||(i[u++]=a)}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn i}</span>)}}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(e){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="fstat-no" title="function not covered" ></span>function i(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;"undefined"!=typeof Symbol&amp;&amp;e.constructor===Symbol?"symbol":typeof e}<span class="fstat-no" title="function not covered" ></span>function u(e,t){<span class="cstat-no" title="statement not covered" ></span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}<span class="fstat-no" title="function not covered" ></span></span>function s(e){<span class="cstat-no" title="statement not covered" ></span>var t=null,n=c,r=c;<span class="cstat-no" title="statement not covered" >r</span>eturn e=e||c,m?(t=new m(<span class="fstat-no" title="function not covered" >function(t,i){<span class="cstat-no" title="statement not covered" ></span>n=t,r=i,e(t,i)}</span>),t.resolve=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,r=Array(e),i=0;e&gt;i;i++)<span class="cstat-no" title="statement not covered" >r[i]=arguments[i];<span class="cstat-no" title="statement not covered" >n</span></span>.apply(t,r)}</span>,t.reject=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,n=Array(e),i=0;e&gt;i;i++)<span class="cstat-no" title="statement not covered" >n[i]=arguments[i];<span class="cstat-no" title="statement not covered" >r</span></span>.apply(t,n)}</span>):t=new v(e),t}<span class="cstat-no" title="statement not covered" ></span>var o=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>for(var n=0;n&lt;t.length;n++){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >r</span>.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}</span>}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n,r){<span class="cstat-no" title="statement not covered" ></span>return n&amp;&amp;e(t.prototype,n),r&amp;&amp;e(t,r),t}</span>}</span>();<span class="cstat-no" title="statement not covered" >O</span>bject.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.Promise=s;<span class="cstat-no" title="statement not covered" >v</span>ar a=n(21),l=r(a),c=l["default"].noop,f=10,h=t.EventEmitter=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(){<span class="cstat-no" title="statement not covered" ></span>u(this,e),this._events=this._events||{},this._maxListeners=this._maxListeners||f}<span class="cstat-no" title="statement not covered" ></span>return o(e,[{key:"setMaxListeners",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if("number"!=typeof e||0&gt;e)<span class="cstat-no" title="statement not covered" >throw TypeError("n must be a positive number");<span class="cstat-no" title="statement not covered" >t</span></span>his._maxListeners=e}</span>},{key:"emit",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t,n,r,u,s,o;<span class="cstat-no" title="statement not covered" >i</span>f(this._events||(this._events={}),"error"===e&amp;&amp;(!this._events.error||"object"===i(this._events.error)&amp;&amp;!this._events.error.length)){<span class="cstat-no" title="statement not covered" >if(t=arguments[1],!this.domain)<span class="cstat-no" title="statement not covered" >throw t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');<span class="cstat-no" title="statement not covered" >r</span></span>eturn t||(t=new TypeError('Uncaught, unspecified "error" event.')),!1}<span class="cstat-no" title="statement not covered" ></span>i</span>f(n=this._events[e],"undefined"==typeof n)<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >i</span></span>f("function"==typeof n)<span class="cstat-no" title="statement not covered" >switch(arguments.length){case 1:<span class="cstat-no" title="statement not covered" >n.call(this);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 2:<span class="cstat-no" title="statement not covered" >n.call(this,arguments[1]);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 3:<span class="cstat-no" title="statement not covered" >n.call(this,arguments[1],arguments[2]);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >for(r=arguments.length,u=new Array(r-1),s=1;r&gt;s;s++)<span class="cstat-no" title="statement not covered" >u[s-1]=arguments[s];<span class="cstat-no" title="statement not covered" >n</span></span>.apply(this,u)}</span>e</span>lse <span class="cstat-no" title="statement not covered" >if("object"===("undefined"==typeof n?"undefined":i(n))){<span class="cstat-no" title="statement not covered" >for(r=arguments.length,u=new Array(r-1),s=1;r&gt;s;s++)<span class="cstat-no" title="statement not covered" >u[s-1]=arguments[s];<span class="cstat-no" title="statement not covered" >f</span></span>or(o=n.slice(),r=o.length,s=0;r&gt;s;s++)<span class="cstat-no" title="statement not covered" >o[s].apply(this,u)}<span class="cstat-no" title="statement not covered" ></span></span>r</span></span>eturn!0}</span>},{key:"addListener",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n;<span class="cstat-no" title="statement not covered" >i</span>f("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >r</span></span>eturn this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit("newListener",e,"function"==typeof t.listener?t.listener:t),this._events[e]?"object"===i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,"object"!==i(this._events[e])||this._events[e].warned||(n=this._maxListeners,n&amp;&amp;n&gt;0&amp;&amp;this._events[e].length&gt;n&amp;&amp;(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())),this}</span>},{key:"once",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="fstat-no" title="function not covered" ></span>function n(){<span class="cstat-no" title="statement not covered" ></span>this.removeListener(e,n),t.apply(this,arguments)}<span class="cstat-no" title="statement not covered" ></span>if("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >r</span></span>eturn n.listener=t,this.on(e,n),this}</span>},{key:"removeListener",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n,r,u,s;<span class="cstat-no" title="statement not covered" >i</span>f("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events||!this._events[e])<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(n=this._events[e],u=n.length,r=-1,n===t||"function"==typeof n.listener&amp;&amp;n.listener===t)<span class="cstat-no" title="statement not covered" >this._events[e]=void 0,this._events.removeListener&amp;&amp;this.emit("removeListener",e,t);e</span>lse <span class="cstat-no" title="statement not covered" >if("object"===("undefined"==typeof n?"undefined":i(n))){<span class="cstat-no" title="statement not covered" >for(s=u;s-- &gt;0;)<span class="cstat-no" title="statement not covered" >if(n[s]===t||n[s].listener&amp;&amp;n[s].listener===t){<span class="cstat-no" title="statement not covered" >r=s;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(0&gt;r)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >1</span></span>===n.length?(n.length=0,this._events[e]=void 0):n.splice(r,1),this._events.removeListener&amp;&amp;this.emit("removeListener",e,t)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn this}</span>},{key:"removeAllListeners",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t,n;<span class="cstat-no" title="statement not covered" >i</span>f(!this._events)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events.removeListener)<span class="cstat-no" title="statement not covered" >return 0===arguments.length?this._events={}:this._events[e]&amp;&amp;(this._events[e]=void 0),this;<span class="cstat-no" title="statement not covered" >i</span></span>f(0===arguments.length){<span class="cstat-no" title="statement not covered" >for(var r=Object.keys(this._events),i=0;i&lt;r.length;i++){<span class="cstat-no" title="statement not covered" >var t=r[i];<span class="cstat-no" title="statement not covered" >"</span>removeListener"!==t&amp;&amp;this.removeAllListeners(t)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this.removeAllListeners("removeListener"),this._events={},this}<span class="cstat-no" title="statement not covered" ></span>i</span>f(n=this._events[e],"function"==typeof n)<span class="cstat-no" title="statement not covered" >this.removeListener(e,n);e</span>lse <span class="cstat-no" title="statement not covered" >for(;n.length;)<span class="cstat-no" title="statement not covered" >this.removeListener(e,n[n.length-1]);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn this._events[e]=void 0,this}</span>},{key:"listeners",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t;<span class="cstat-no" title="statement not covered" >r</span>eturn t=this._events&amp;&amp;this._events[e]?"function"==typeof this._events[e]?[this._events[e]]:this._events[e].slice():[]}</span>}]),e}</span>();<span class="cstat-no" title="statement not covered" >h</span>.prototype.on=h.prototype.addListener,h.listenerCount=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n;<span class="cstat-no" title="statement not covered" >r</span>eturn n=e._events&amp;&amp;e._events[t]?"function"==typeof e._events[t]?1:e._events[t].length:0}</span>,h.inherits=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>l["default"].inherits(e,h)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar v=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=0||void 0===arguments[0]?c:arguments[0];<span class="cstat-no" title="statement not covered" >u</span>(this,e),this._settled=!1,this._success=!1,this._args=[],this._callbacks=[],this._onReject=c,t(this.resolve.bind(this),this.reject.bind(this))}<span class="cstat-no" title="statement not covered" ></span>return o(e,[{key:"then",value:<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1],i=new e;<span class="cstat-no" title="statement not covered" >r</span>eturn this._onReject=r,this._callbacks.push(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,r=Array(e),u=0;e&gt;u;u++)<span class="cstat-no" title="statement not covered" >r[u]=arguments[u];<span class="cstat-no" title="statement not covered" >v</span></span>ar s=t.apply(n,r);<span class="cstat-no" title="statement not covered" >s</span>&amp;&amp;"function"==typeof s.then&amp;&amp;s.then(i.resolve.bind(i),i.reject.bind(i))}</span>),this._settled&amp;&amp;(this._success?this.resolve.apply(this,this._args):this.onReject.apply(this,this._args)),i}</span>},{key:"catch",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return this._onReject=e,this}</span>},{key:"resolve",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,t=Array(e),n=0;e&gt;n;n++)<span class="cstat-no" title="statement not covered" >t[n]=arguments[n];<span class="cstat-no" title="statement not covered" >f</span></span>or(var r=0;r&lt;this._callbacks.length;r++){<span class="cstat-no" title="statement not covered" >var i=this._callbacks[r];<span class="cstat-no" title="statement not covered" >i</span>.apply(this,t)}<span class="cstat-no" title="statement not covered" ></span>t</span>his._args=t,this._settled=!0,this._success=!0}</span>},{key:"reject",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,t=Array(e),n=0;e&gt;n;n++)<span class="cstat-no" title="statement not covered" >t[n]=arguments[n];<span class="cstat-no" title="statement not covered" >t</span></span>his._onReject.apply(this,t),this._args=t,this._settled=!0}</span>}]),e}</span>(),m=(e||window).Promise||null}</span>).call(t,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this}</span>())}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="cstat-no" title="statement not covered" ></span>Object.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >v</span>ar i=n(21),u=r(i),s=n(22),o=u["default"].noop,a={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=a;<span class="cstat-no" title="statement not covered" >v</span>ar l=null;<span class="cstat-no" title="statement not covered" >a</span>.set=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=new s.Promise;<span class="cstat-no" title="statement not covered" >i</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>r.emit("set",e,t),l&amp;&amp;clearTimeout(l),l=setTimeout(r.save.bind(r),1e3)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar o=this.store;<span class="cstat-no" title="statement not covered" >n</span>=n||u["default"].noop;<span class="cstat-no" title="statement not covered" >v</span>ar a="min-"+e;<span class="cstat-no" title="statement not covered" >i</span>f(o.async){<span class="cstat-no" title="statement not covered" >var c=<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>var s=JSON.stringify(t);<span class="cstat-no" title="statement not covered" >o</span>.set(a,s,<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>return u?(i.reject(u),n(u)):(r._keys[e]=0,i.resolve(e),void n(null,e,t))}</span>)}</span>;<span class="cstat-no" title="statement not covered" >o</span>.ready?c():o.on("ready",c)}</span>else{<span class="cstat-no" title="statement not covered" >var f=JSON.stringify(t);<span class="cstat-no" title="statement not covered" >o</span>.set(a,f),this._keys[e]=0,i.resolve(e),n(null,e,t)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i}</span>,a.setnx=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?o:arguments[2],i=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>return u&amp;&amp;(r(u),i.reject(u)),s?i.reject(new Error("The key is exists.")):void n.set(e,t,r).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(null,e),i.resolve(e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e),i.reject(e)}</span>)}</span>),i}</span>,a.setex=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?o:arguments[3],u=new s.Promise,a=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>r.del(e,o)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.set(e,n,<span class="fstat-no" title="function not covered" >function(e,n){<span class="cstat-no" title="statement not covered" ></span>setTimeout(a,1e3*t),i(e,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>setTimeout(a,1e3*t),u.resolve(e),i(null,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u}</span>,a.psetex=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?o:arguments[3],a=new s.Promise,l=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>r.del(e,u["default"].noop)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.set(e,n,<span class="fstat-no" title="function not covered" >function(e,n){<span class="cstat-no" title="statement not covered" ></span>setTimeout(l,t),i(e,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>setTimeout(l,t),a.resolve(e),i(null,e)}</span>,a.reject.bind(a)),a}</span>,a.mset=<span class="fstat-no" title="function not covered" >function(e){<span class="fstat-no" title="function not covered" ></span>function t(){<span class="cstat-no" title="statement not covered" ></span>c.length&gt;0?(r(c),i.reject(c)):(r(null,l),i.resolve(l))}<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],i=new s.Promise,u=Object.keys(e),a=0,l=[],c=[],f=<span class="fstat-no" title="function not covered" >function h(r,i){<span class="cstat-no" title="statement not covered" ></span>delete u[i],n.set(r,e[r]).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>l.push(e),a++,u[a]?h(u[a],a):t()}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return c.push(e),a++,u[a]?h(u[a],a):t()}</span>)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn f(u[a],a),i}</span>,a.msetnx=<span class="fstat-no" title="function not covered" >function(e){<span class="fstat-no" title="function not covered" ></span>function t(){<span class="cstat-no" title="statement not covered" ></span>return c.length?(r(c),i.reject(c)):(r(null,l),void i.resolve(l))}<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],i=new s.Promise,u=Object.keys(e),a=0,l=[],c=[],f=<span class="fstat-no" title="function not covered" >function h(r,i){<span class="cstat-no" title="statement not covered" ></span>delete u[i],n.setnx(r,e[r]).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>l.push(e),a++,u[a]?h(u[a],a):t()}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>c.push(e),t()}</span>)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn f(u[a],a),i}</span>,a.append=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?o:arguments[2],i=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.resolve(""),r}</span>).then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.set(e,r+t)}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return n.strlen(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.resolve(e),r(null,e)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,a.get=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("get",e,n)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar i=this.store,u="min-"+e;<span class="cstat-no" title="statement not covered" >i</span>f(i.async){<span class="cstat-no" title="statement not covered" >var a=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.get(u,<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>if(e){<span class="cstat-no" title="statement not covered" >var i=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn r.reject(i),n(i)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(t)<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var u=JSON.parse(t);<span class="cstat-no" title="statement not covered" >r</span>.resolve(u),n(null,u)}</span>catch(e){<span class="cstat-no" title="statement not covered" >r.reject(e),n(e)}</span>e</span>lse{<span class="cstat-no" title="statement not covered" >var e=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>.reject(e),n(e)}</span>}</span>)}</span>;<span class="cstat-no" title="statement not covered" >i</span>.ready?a():i.on("ready",a)}</span>else <span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var l=this.store.get(u);<span class="cstat-no" title="statement not covered" >i</span>f(l)<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var c=JSON.parse(l);<span class="cstat-no" title="statement not covered" >r</span>.resolve(c),n(null,c)}</span>catch(f){<span class="cstat-no" title="statement not covered" >r.reject(f),n(f)}</span>e</span>lse{<span class="cstat-no" title="statement not covered" >var f=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>.reject(f),n(f)}</span>}</span>catch(f){<span class="cstat-no" title="statement not covered" >r.reject(f),n(f)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn r}</span>,a.getrange=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?o:arguments[3],u=new s.Promise;<span class="cstat-no" title="statement not covered" >u</span>.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("getrange",e,t,n,i)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar a=n-t+1;<span class="cstat-no" title="statement not covered" >r</span>eturn this.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=e.substr(t,a);<span class="cstat-no" title="statement not covered" >u</span>.resolve(n),i(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u}</span>,a.mget=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],n=new s.Promise,r=0,i=this.multi(),r=0;r&lt;e.length;r++)<span class="cstat-no" title="statement not covered" >i.get(e[r]);<span class="cstat-no" title="statement not covered" >r</span></span>eturn i.exec(<span class="fstat-no" title="function not covered" >function(e,r){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return t(e),n.reject(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar i=r.map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e[0]}</span>);<span class="cstat-no" title="statement not covered" >t</span>(e),n.resolve(i)}</span>),n}</span>,a.getset=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?o:arguments[2],i=new s.Promise;<span class="cstat-no" title="statement not covered" >i</span>.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.emit("getset",e,t,r)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar u=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.get(e).then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return u=r,n.set(e,t)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.resolve(u),r(null,u)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,a.strlen=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],n=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if("string"==typeof e){<span class="cstat-no" title="statement not covered" >var r=e.length;<span class="cstat-no" title="statement not covered" >n</span>.resolve(r),t(null,r)}</span>else{<span class="cstat-no" title="statement not covered" >var i=new TypeError;<span class="cstat-no" title="statement not covered" >n</span>.reject(i),t(i)}</span>}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.reject(e),t(e)}</span>),n}</span>,a.incr=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("incr",e,n)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>if(n)<span class="cstat-no" title="statement not covered" >return t.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.resolve(0),r}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseInt(i))?(r.reject("value wrong"),n("value wrong")):(i=parseInt(i),t.set(e,++i))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return t.get(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>r.resolve(t),n(null,t,e)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,a.incrby=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?o:arguments[2],i=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.emit("incrby",e,t,r)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.resolve(0),r}</span>).then(<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseFloat(u))?(i.reject("value wrong"),r("value wrong")):(u=parseFloat(u),n.set(e,u+t))}</span>).then(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>i.resolve(t),r(null,t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,a.incrbyfloat=a.incrby,a.decr=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("decr",e,n)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>if(n)<span class="cstat-no" title="statement not covered" >return t.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.resolve(0),r}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseInt(i))?(r.reject("value wrong"),n("value wrong")):(i=parseInt(i),t.set(e,--i))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return t.get(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>r.resolve(t),n(null,t,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,a.decrby=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?o:arguments[2],i=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.emit("decrby",e,t,r)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new s.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn r.resolve(0),r}</span>).then(<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseInt(u))?(i.reject("value wrong"),r("value wrong")):(u=parseInt(u),n.set(e,u-t))}</span>).then(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>i.resolve(t),r(null,t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="cstat-no" title="statement not covered" ></span>var i=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&amp;&amp;(n.push(s.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,u=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n){<span class="cstat-no" title="statement not covered" ></span>if(Array.isArray(t))<span class="cstat-no" title="statement not covered" >return t;<span class="cstat-no" title="statement not covered" >i</span></span>f(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}</span>();<span class="cstat-no" title="statement not covered" >O</span>bject.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >v</span>ar u=n(21),s=r(u),o=n(22),a=s["default"].noop,l={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=l,l.hset=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>if(s)<span class="cstat-no" title="statement not covered" >return u.reject(s),i(s);<span class="cstat-no" title="statement not covered" >i</span></span>f(o)<span class="cstat-no" title="statement not covered" >r.get(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>return s?(u.reject(s),i(s)):(o[t]=n,void r.set(e,o,<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return r?(u.reject(r),i(r)):(u.resolve([e,t,n]),void i(null,e,t,n))}</span>))}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var a={};<span class="cstat-no" title="statement not covered" >a</span>[t]=n,r.set(e,a,<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>return s?(reject(s),i(s)):(r._keys[e]=1,u.resolve([e,t,n]),void i(null,e,t,n))}</span>)}</span>}</span>),u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>r.emit("hset",e,t,n)}</span>),u}</span>,l.hsetnx=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,u=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],s=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.hexists(e,t,<span class="fstat-no" title="function not covered" >function(o,a){<span class="cstat-no" title="statement not covered" ></span>if(o)<span class="cstat-no" title="statement not covered" >return s.reject(o),u(o);<span class="cstat-no" title="statement not covered" >i</span></span>f(a){<span class="cstat-no" title="statement not covered" >var o=new Error("The field of the hash is exists");<span class="cstat-no" title="statement not covered" >r</span>eturn s.reject(o),u(o)}<span class="cstat-no" title="statement not covered" ></span>r</span>.hset(e,t,n).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=i(e,3),n=t[0],r=t[1],o=t[2];<span class="cstat-no" title="statement not covered" >s</span>.resolve([n,r,o]),u(null,n,r,o)}</span>)}</span>),s}</span>,l.hmset=<span class="fstat-no" title="function not covered" >function(e,t){<span class="fstat-no" title="function not covered" ></span>function n(){<span class="cstat-no" title="statement not covered" ></span>h.length&gt;0?(u(h),s.reject(h)):(u(null,f),s.resolve(f))}<span class="cstat-no" title="statement not covered" ></span>var r=this,u=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],s=new o.Promise,l=Object.keys(t),c=0,f=[],h=[],v=<span class="fstat-no" title="function not covered" >function m(u,s){<span class="cstat-no" title="statement not covered" ></span>delete l[s],r.hset(e,u,t[u]).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=i(e,3),r=t[0],u=t[1],s=t[2];<span class="cstat-no" title="statement not covered" >f</span>.push([r,u,s]),c++,l[c]?m(l[c],c):n()}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return h.push(e),c++,l[c]?m(l[c],c):n()}</span>)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn v(l[c],c),s}</span>,l.hget=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.hexists(e,t,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),r(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(s)<span class="cstat-no" title="statement not covered" >n.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=e[t];<span class="cstat-no" title="statement not covered" >i</span>.resolve(n),r(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var u=new Error("no such field");<span class="cstat-no" title="statement not covered" >i</span>.reject(u),r(u)}</span>}</span>),i}</span>,l.hmget=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],r=new o.Promise,i=[],u=this.multi();<span class="cstat-no" title="statement not covered" >r</span>eturn t.forEach(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>u.hget(e,t)}</span>),u.exec(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return e?(n(e),r.reject(e)):(i=t.map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e[0]}</span>),r.resolve(i),void n(null,i))}</span>),r}</span>,l.hgetall=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(i,u){<span class="cstat-no" title="statement not covered" ></span>if(i)<span class="cstat-no" title="statement not covered" >return n(i),r.reject(i);<span class="cstat-no" title="statement not covered" >i</span></span>f(!u){<span class="cstat-no" title="statement not covered" >var i=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn n(i),r.reject(i)}<span class="cstat-no" title="statement not covered" ></span>t</span>.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.resolve(e),n(null,e)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>)}</span>),r}</span>,l.hdel=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=i(e,3),r=t[0],u=t[1],s=t[2];<span class="cstat-no" title="statement not covered" >n</span>.emit("hdel",r,u,s)}</span>),this.hexists(e.field,<span class="fstat-no" title="function not covered" >function(i,s){<span class="cstat-no" title="statement not covered" ></span>if(i)<span class="cstat-no" title="statement not covered" >return r(i),u.reject(i);<span class="cstat-no" title="statement not covered" >i</span></span>f(!s){<span class="cstat-no" title="statement not covered" >var i=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn r(i),u.reject(i)}<span class="cstat-no" title="statement not covered" ></span>n</span>.get(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var s=i[t];<span class="cstat-no" title="statement not covered" >d</span>elete i[t],n.set(e,i).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>u.resolve([e,t,s]),r(null,e,t,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),r(e)}</span>)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e)}</span>)}</span>),u}</span>,l.hlen=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(i,u){<span class="cstat-no" title="statement not covered" ></span>return i?(r.reject(i),n(i)):void(u?t.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=Object.keys(e).length;<span class="cstat-no" title="statement not covered" >r</span>.resolve(t),n(null,t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>):(r.resolve(0),n(null,0)))}</span>),r}</span>,l.hkeys=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(i,u){<span class="cstat-no" title="statement not covered" ></span>return i?(r.reject(i),n(i)):void(u?t.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=Object.keys(e);<span class="cstat-no" title="statement not covered" >r</span>.resolve(t),n(null,t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>):(r.resolve(0),n(null,0)))}</span>),r}</span>,l.hexists=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t?n.get(e):(i.resolve(!1),void r(null,!1))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.hasOwnProperty(t)?(i.resolve(!0),r(null,!0)):(i.resolve(!1),r(null,!1))}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,l.hincr=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>n.emit("hincr",e,t,r)}</span>),this.hexists(e,t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return n.hget(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn t.resolve(0),t}</span>).then(<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseFloat(u))?(i.reject("value wrong"),r("value wrong")):(u=parseFloat(u),n.hset(e,t,++u))}</span>).then(<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>i.resolve(n),r(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(null,e)}</span>),i}</span>,l.hincrby=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>r.emit("hincr",e,t,n)}</span>),this.hexists(e,t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return r.hget(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn t.resolve(0),t}</span>).then(<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseFloat(s))?(u.reject("value wrong"),i("value wrong")):(s=parseFloat(s),r.hset(e,t,s+n))}</span>).then(<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>u.resolve(n),i(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(null,e)}</span>),u}</span>,l.hincrbyfloat=l.hincrby,l.hdecr=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>n.emit("hdecr",e,t,r)}</span>),this.hexists(e,t).then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>if(r)<span class="cstat-no" title="statement not covered" >return n.hget(e,t);<span class="cstat-no" title="statement not covered" >v</span></span>ar i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.resolve(0),i}</span>).then(<span class="fstat-no" title="function not covered" >function(u){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseFloat(u))?(i.reject("value wrong"),r("value wrong")):(u=parseFloat(u),n.hset(e,t,--u))}</span>).then(<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>i.resolve(n),r(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,l.hdecrby=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>r.emit("hincr",e,t,n)}</span>),this.hexists(e,t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return r.hget(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn t.resolve(0),t}</span>).then(<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>return isNaN(parseFloat(s))?(u.reject("value wrong"),i("value wrong")):(s=parseFloat(s),r.hset(e,t,s-n))}</span>).then(<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>u.resolve(n),i(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(null,e)}</span>),u}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="cstat-no" title="statement not covered" ></span>var i=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&amp;&amp;(n.push(s.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,u=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span></span></span></span></span>
}<span class="cstat-no" title="statement not covered" >return n}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n){<span class="cstat-no" title="statement not covered" ></span>if(Array.isArray(t))<span class="cstat-no" title="statement not covered" >return t;<span class="cstat-no" title="statement not covered" >i</span></span>f(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}</span>();<span class="cstat-no" title="statement not covered" >Object.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >v</span>ar u=n(21),s=r(u),o=n(22),a=s["default"].noop,l={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=l,l.lpush=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.emit("lpush",e,t,r)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),r(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(s)<span class="cstat-no" title="statement not covered" >n.get(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>return u?(i.reject(u),r(u)):(s.unshift(t),void n.set(e,s,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return i.reject(e),r(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=s.length;<span class="cstat-no" title="statement not covered" >i</span>.resolve(t),r(null,t)}</span>))}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var o=[t];<span class="cstat-no" title="statement not covered" >n</span>.set(e,o,<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t?(i.reject(t),r(t)):(n._keys[e]=2,i.resolve(1),void r(null,1))}</span>)}</span>}</span>),i}</span>,l.lpushx=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.emit("lpush",e,t,r)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),r(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(!s){<span class="cstat-no" title="statement not covered" >var u=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn r(u),i.reject(u)}<span class="cstat-no" title="statement not covered" ></span>n</span>.get(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),r(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(!s.length){<span class="cstat-no" title="statement not covered" >var u=new Error("The list is empty.");<span class="cstat-no" title="statement not covered" >r</span>eturn r(u),i.reject(u)}<span class="cstat-no" title="statement not covered" ></span>s</span>.unshift(t),n.set(e,s,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return i.reject(e),r(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=s.length;<span class="cstat-no" title="statement not covered" >i</span>.resolve(t),r(null,t)}</span>)}</span>)}</span>),i}</span>,l.rpush=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return r.emit("rpush",e,t,n)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),n(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(s)<span class="cstat-no" title="statement not covered" >r.get(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>return u?(i.reject(u),n(u)):(s.push(t),void r.set(e,s,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return i.reject(e),n(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=s.length;<span class="cstat-no" title="statement not covered" >i</span>.resolve(t),n(null,t)}</span>))}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var o=[t];<span class="cstat-no" title="statement not covered" >r</span>.set(e,o,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e?(i.reject(e),n(e)):(i.resolve(1),void n(null,1))}</span>)}</span>}</span>),i}</span>,l.rpushx=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return n.emit("rpush",e,t,r)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),r(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(!s){<span class="cstat-no" title="statement not covered" >var u=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn r(u),i.reject(u)}<span class="cstat-no" title="statement not covered" ></span>n</span>.get(e,<span class="fstat-no" title="function not covered" >function(u,s){<span class="cstat-no" title="statement not covered" ></span>if(u)<span class="cstat-no" title="statement not covered" >return i.reject(u),r(u);<span class="cstat-no" title="statement not covered" >i</span></span>f(!s.length){<span class="cstat-no" title="statement not covered" >var u=new Error("The list is empty.");<span class="cstat-no" title="statement not covered" >r</span>eturn r(u),i.reject(u)}<span class="cstat-no" title="statement not covered" ></span>s</span>.push(t),n.set(e,s,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return i.reject(e),r(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=s.length;<span class="cstat-no" title="statement not covered" >i</span>.resolve(t),r(null,t)}</span>)}</span>)}</span>),i}</span>,l.lpop=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=new o.Promise,i=null;<span class="cstat-no" title="statement not covered" >r</span>eturn r.then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return n.emit("lpop",e,t)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return i?n.get(e):(r.resolve(null),void t(null,null))}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return i=t.shift(),n.set(e,t)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.resolve(i),t(null,i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),t(e)}</span>),r}</span>,l.rpop=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("rpop",e,n)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar i=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return i?t.get(e):(r.resolve(null),void n(null,null))}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return i=n.pop(),t.set(e,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.resolve(i),n(null,i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,l.llen=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(i,u){<span class="cstat-no" title="statement not covered" ></span>return i?(r.reject(i),n(i)):void(u?t.get(e,<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return r.reject(e),n(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar i=t.length;<span class="cstat-no" title="statement not covered" >r</span>.resolve(i),n(null,i)}</span>):(r.resolve(0),n(null,0)))}</span>),r}</span>,l.lrange=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>return s?(u.reject(s),i(s)):void(o?r.get(e,<span class="fstat-no" title="function not covered" >function(e,r){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return u.reject(e),i(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar s=r.slice(t,n+1);<span class="cstat-no" title="statement not covered" >u</span>.resolve(s),i(null,s)}</span>):(u.resolve(null),i(null,null)))}</span>),u}</span>,l.lrem=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("lrem",e,t,n,i)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>return s?(u.reject(s),i(s)):void(o?r.get(e,<span class="fstat-no" title="function not covered" >function(e,r){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return u.reject(e),i(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar s=0;<span class="cstat-no" title="statement not covered" >s</span>witch(!0){case t&gt;0:<span class="cstat-no" title="statement not covered" >for(var o=0;o&lt;r.length&amp;&amp;t&gt;s;o++)<span class="cstat-no" title="statement not covered" >r[o]===n&amp;&amp;(r.splice(o,1)[0],s++);<span class="cstat-no" title="statement not covered" >b</span></span>reak;c</span>ase 0&gt;t:<span class="cstat-no" title="statement not covered" >for(var o=r.length-1;o&gt;=0&amp;&amp;t&gt;s;o--)<span class="cstat-no" title="statement not covered" >r[o]===n&amp;&amp;(r.splice(o,1)[0],s++);<span class="cstat-no" title="statement not covered" >b</span></span>reak;c</span>ase t=0:<span class="cstat-no" title="statement not covered" >for(var o=r.length-1;o&gt;=0;o--)<span class="cstat-no" title="statement not covered" >r[o]===n&amp;&amp;(r.splice(o,1)[0],s++)}<span class="cstat-no" title="statement not covered" ></span></span>u</span>.resolve(s),i(null,s)}</span>):(u.resolve(null),i(null,null)))}</span>),u}</span>,l.lset=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("lset",e,t,n,i)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>if(s)<span class="cstat-no" title="statement not covered" >return u.reject(s),i(s);<span class="cstat-no" title="statement not covered" >i</span></span>f(!o){<span class="cstat-no" title="statement not covered" >var s=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn u.reject(s),i(s)}<span class="cstat-no" title="statement not covered" ></span>r</span>.get(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>if(s)<span class="cstat-no" title="statement not covered" >return u.reject(s),i(s);<span class="cstat-no" title="statement not covered" >i</span></span>f(!o[t]||!o.length){<span class="cstat-no" title="statement not covered" >var s=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn u.reject(s),i(s)}<span class="cstat-no" title="statement not covered" ></span>o</span>[t]=n,r.set(e,o,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return u.reject(e),i(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=o.length;<span class="cstat-no" title="statement not covered" >u</span>.resolve(t),i(null,t)}</span>)}</span>)}</span>),u}</span>,l.ltrim=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,u=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],s=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t?r.get(e):(s.resolve(null),u(null,null))}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var u=i.splice(t,n+1);<span class="cstat-no" title="statement not covered" >r</span>eturn r.set(e,u)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=i(e,2),n=t[0],r=t[1];<span class="cstat-no" title="statement not covered" >s</span>.resolve(r),u(null,r,n)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),u(e)}</span>),s}</span>,l.lindex=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(!t){<span class="cstat-no" title="statement not covered" >var u=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn i.reject(u),r(u)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n.get(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=e[t];<span class="cstat-no" title="statement not covered" >i</span>.resolve(n),r(null,n)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,l.linsertBefore=<span class="fstat-no" title="function not covered" >function(e,t,n,r){<span class="cstat-no" title="statement not covered" ></span>var i=this,u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>return i.emit("linsertBefore",e,t,n,r)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>return s?(u.reject(s),r(s)):void(o?i.get(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>if(s)<span class="cstat-no" title="statement not covered" >return u.reject(s),r(s);<span class="cstat-no" title="statement not covered" >v</span></span>ar a=o.indexOf(t);<span class="cstat-no" title="statement not covered" >r</span>eturn 0&gt;a?(u.resolve(null),r(null,null)):(o.splice(a,1,n,t),void i.set(e,o,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return u.reject(e),r(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=o.length;<span class="cstat-no" title="statement not covered" >u</span>.resolve(t),r(null,t)}</span>))}</span>):(u.resolve(null),r(null,null)))}</span>),u}</span>,l.linsertAfter=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("linsertAfter",e,t,n,i)}</span>),this.exists(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>return s?(u.reject(s),i(s)):void(o?r.get(e,<span class="fstat-no" title="function not covered" >function(s,o){<span class="cstat-no" title="statement not covered" ></span>if(s)<span class="cstat-no" title="statement not covered" >return u.reject(s),i(s);<span class="cstat-no" title="statement not covered" >v</span></span>ar a=o.indexOf(t);<span class="cstat-no" title="statement not covered" >r</span>eturn 0&gt;a?(u.resolve(null),i(null,null)):(o.splice(a,0,n),void r.set(e,o,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return u.reject(e),i(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar t=o.length;<span class="cstat-no" title="statement not covered" >u</span>.resolve(t),i(null,t)}</span>))}</span>):(u.resolve(null),i(null,null)))}</span>),u}</span>,l.rpoplpush=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],u=new o.Promise,s=null;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>var u=i(r,2),s=u[0],o=u[1];<span class="cstat-no" title="statement not covered" >r</span>eturn n.emit("rpoplpush",e,t,s,o)}</span>),this.rpop(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.lpush(t,s=e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.resolve([s,e]),r(null,s,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e),u.reject(e)}</span>),u}</span>,l.lpoprpush=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise,u=null;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r,i){<span class="cstat-no" title="statement not covered" ></span>return n.emit("lpoprpush",e,t,r,i)}</span>),this.lpop(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.rpush(t,u=e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.resolve(u,e),r(null,u,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e),i.reject(e)}</span>),i}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="cstat-no" title="statement not covered" ></span>var i=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&amp;&amp;(n.push(s.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,u=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n){<span class="cstat-no" title="statement not covered" ></span>if(Array.isArray(t))<span class="cstat-no" title="statement not covered" >return t;<span class="cstat-no" title="statement not covered" >i</span></span>f(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}</span>();<span class="cstat-no" title="statement not covered" >O</span>bject.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >v</span>ar u=n(21),s=r(u),o=n(22),a=s["default"].noop,l={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=l,l.sadd=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)<span class="cstat-no" title="statement not covered" >r[i-1]=arguments[i];<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >u</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("sadd",e,n)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar l=0;<span class="cstat-no" title="statement not covered" >i</span>f(r[r.length-1]instanceof Function)<span class="cstat-no" title="statement not covered" >var c=r.splice(r.length-1,1)[0];e</span>lse <span class="cstat-no" title="statement not covered" >var c=a;<span class="cstat-no" title="statement not covered" >r</span></span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>if(n)<span class="cstat-no" title="statement not covered" >return t.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar i=s["default"].arrayUnique(r);<span class="cstat-no" title="statement not covered" >r</span>eturn t.set(e,i)}</span>).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(Array.isArray(arguments[0])){<span class="cstat-no" title="statement not covered" >var n=arguments[0],i=!0,s=!1,o=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var a,f=r[Symbol.iterator]();!(i=(a=f.next()).done);i=!0){<span class="cstat-no" title="statement not covered" >var h=a.value;<span class="cstat-no" title="statement not covered" >i</span>f(n.indexOf(h)&gt;=0)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >n</span></span>.push(h),l++}</span>}</span>catch(v){<span class="cstat-no" title="statement not covered" >s=!0,o=v}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!i&amp;&amp;f["return"]&amp;&amp;f["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(s)<span class="cstat-no" title="statement not covered" >throw o}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t.set(e,n)}<span class="cstat-no" title="statement not covered" ></span>"</span>string"==typeof arguments[0]&amp;&amp;(l+=r.length,t._keys[e]=3,u.resolve(l),c(null,l))}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>t._keys[e]=3,u.resolve(l),c(null,l)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),c(e)}</span>),u}</span>,l.srem=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)<span class="cstat-no" title="statement not covered" >r[i-1]=arguments[i];<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new o.Promise(a),s=a;<span class="cstat-no" title="statement not covered" >u</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("srem",e,r,n)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar l=0;<span class="cstat-no" title="statement not covered" >r</span>eturn r[r.length-1]instanceof Function&amp;&amp;(s=r.pop()),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?t.get(e):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>var i=!0,u=!1,s=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var o,a=r[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){<span class="cstat-no" title="statement not covered" >var c=o.value,f=n.indexOf(c);<span class="cstat-no" title="statement not covered" >f</span>&gt;=0&amp;&amp;(n.splice(f,1),l++)}</span>}</span>catch(h){<span class="cstat-no" title="statement not covered" >u=!0,s=h}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!i&amp;&amp;a["return"]&amp;&amp;a["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(u)<span class="cstat-no" title="statement not covered" >throw s}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t.set(e,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>t._keys[e]=3,u.resolve(l),s(null,l)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(e)}</span>),u}</span>,l.smembers=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?t.get(e):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.resolve(e),n(null,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,l.sismember=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t?n.get(e):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=e.indexOf(t)&gt;=0?1:0;<span class="cstat-no" title="statement not covered" >i</span>.resolve(n),r(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,l.scard=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?t.get(e):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=e.length;<span class="cstat-no" title="statement not covered" >r</span>.resolve(t),n(null,t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,l.smove=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("smove",e,t,n,i)}</span>),this.exists(key).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t?r.sismember(e,n):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t?r.srem(e,n):new Error("no such member")}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return r.sismember(t,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e?(r._keys[key]=3,u.resolve(0),i(null,0),void 0):r.sadd(t,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r._keys[key]=3,u.resolve(1),i(null,1)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u}</span>,l.srandmember=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return i?t.get(e):(r.resolve(null),void n(null,null))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=Math.floor(Math.random()*e.length)||0,i=e[t];<span class="cstat-no" title="statement not covered" >r</span>.resolve(i),n(null,i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,l.spop=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("spop",e,n)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar i=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return i?t.srandmember(e):(r.resolve(null),void n(null,null))}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return i=n,t.srem(e,i)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.resolve(i),n(null,i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,l.sunion=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=this,t=arguments.length,n=Array(t),r=0;t&gt;r;r++)<span class="cstat-no" title="statement not covered" >n[r]=arguments[r];<span class="cstat-no" title="statement not covered" >v</span></span>ar i=new o.Promise(a),u=a,l=null;<span class="cstat-no" title="statement not covered" >n</span>[n.length-1]instanceof Function&amp;&amp;(u=n.pop());<span class="cstat-no" title="statement not covered" >v</span>ar c=[](l=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>var r=n[t];<span class="cstat-no" title="statement not covered" >r</span>?e.exists(r).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?e.get(r):void l(++t)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>Array.isArray(e)&amp;&amp;(c=c.concat(e)),l(++t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return i.reject(e),u(e)}</span>):(c=s["default"].arrayUnique(c),i.resolve(c),u(null,c))}</span>)(0);<span class="cstat-no" title="statement not covered" >r</span>eturn i}</span>,l.sunionstore=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),u=1;n&gt;u;u++)<span class="cstat-no" title="statement not covered" >r[u-1]=arguments[u];<span class="cstat-no" title="statement not covered" >v</span></span>ar s=new o.Promise(a),l=a;<span class="cstat-no" title="statement not covered" >s</span>.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>var u=i(n,2),s=u[0],o=u[1];<span class="cstat-no" title="statement not covered" >r</span>eturn t.emit("sunionstore",e,r,s,o)}</span>),r[r.length-1]instanceof Function&amp;&amp;(l=r.pop());<span class="cstat-no" title="statement not covered" >v</span>ar c=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.sunion(r).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return c=n,t.exists(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?t.del(e):t.sadd(e,c)}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return"number"!=typeof n?t.sadd(e,c):(s.resolve([n,c]),void l(null,n,c))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.resolve(e,c),l(null,e,c)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),l(e)}</span>),s}</span>,l.sinter=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=this,t=arguments.length,n=Array(t),r=0;t&gt;r;r++)<span class="cstat-no" title="statement not covered" >n[r]=arguments[r];<span class="cstat-no" title="statement not covered" >v</span></span>ar i=new o.Promise(a),u=a,l=null;<span class="cstat-no" title="statement not covered" >n</span>[n.length-1]instanceof Function&amp;&amp;(u=n.pop());<span class="cstat-no" title="statement not covered" >v</span>ar c=[](l=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>var r=n[t];<span class="cstat-no" title="statement not covered" >i</span>f(r)<span class="cstat-no" title="statement not covered" >e.exists(r).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?e.get(r):void l(++t)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>Array.isArray(e)&amp;&amp;c.push(e),l(++t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return i.reject(e),u(e)}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var o=s["default"].arrayInter.apply(s["default"],c);<span class="cstat-no" title="statement not covered" >i</span>.resolve(o),u(null,o)}</span>}</span>)(0);<span class="cstat-no" title="statement not covered" >r</span>eturn i}</span>,l.sinterstore=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this,n=new o.Promise(a),r=a,i=arguments.length,u=Array(i&gt;1?i-1:0),s=1;i&gt;s;s++)<span class="cstat-no" title="statement not covered" >u[s-1]=arguments[s];<span class="cstat-no" title="statement not covered" >u</span></span>[u.length-1]instanceof Function&amp;&amp;(r=u.pop());<span class="cstat-no" title="statement not covered" >v</span>ar l=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.sinter.apply(this,u).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return l=n,t.exists(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?t.del(e):(l.unshift(e),t.sadd.apply(t,l))}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"string"!=typeof i?t.sadd(e,l):(n.resolve(l.length,l),void r(null,l.length,l))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.resolve(l.length,l),r(null,l.length,l)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.reject(e),r(e)}</span>),n}</span>,l.sdiff=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=this,t=arguments.length,n=Array(t),r=0;t&gt;r;r++)<span class="cstat-no" title="statement not covered" >n[r]=arguments[r];<span class="cstat-no" title="statement not covered" >v</span></span>ar i=new o.Promise(a),u=a,l=null;<span class="cstat-no" title="statement not covered" >n</span>[n.length-1]instanceof Function&amp;&amp;(u=n.pop());<span class="cstat-no" title="statement not covered" >v</span>ar c=[](l=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>var r=n[t];<span class="cstat-no" title="statement not covered" >i</span>f(r)<span class="cstat-no" title="statement not covered" >e.exists(r).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?e.get(r):void l(++t)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>Array.isArray(e)&amp;&amp;c.push(e),l(++t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return i.reject(e),u(e)}</span>);e</span>lse{<span class="cstat-no" title="statement not covered" >var o=s["default"].arrayDiff.apply(s["default"],c);<span class="cstat-no" title="statement not covered" >i</span>.resolve(o),u(null,o)}</span>}</span>)(0);<span class="cstat-no" title="statement not covered" >r</span>eturn i}</span>,l.sdiffstore=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this,n=new o.Promise(a),r=a,i=arguments.length,u=Array(i&gt;1?i-1:0),s=1;i&gt;s;s++)<span class="cstat-no" title="statement not covered" >u[s-1]=arguments[s];<span class="cstat-no" title="statement not covered" >u</span></span>[u.length-1]instanceof Function&amp;&amp;(r=u.pop());<span class="cstat-no" title="statement not covered" >v</span>ar l=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.sdiff(u).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return l=n,t.exists(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return n?t.del(e):t.sadd(e,l)}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"number"!=typeof i?t.sadd(e,l):(n.resolve(i,l),void r(null,i,l))}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.resolve(e,l),r(null,e,l)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.reject(e),r(e)}</span>),n}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="fstat-no" title="function not covered" ></span>function i(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;"undefined"!=typeof Symbol&amp;&amp;e.constructor===Symbol?"symbol":typeof e}<span class="cstat-no" title="statement not covered" ></span>Object.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >v</span>ar u=n(21),s=r(u),o=n(22),a=s["default"].noop,l={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=l,l.zadd=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,u=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],s=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn s.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("zadd",e,t,n,i)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>if(i)<span class="cstat-no" title="statement not covered" >return r.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u={};<span class="cstat-no" title="statement not covered" >r</span>eturn u[t]=[0],r.set(e,{ms:[n],hsm:{0:t},shm:u})}</span>).then(<span class="fstat-no" title="function not covered" >function(o){<span class="cstat-no" title="statement not covered" ></span>var a=o[0];<span class="cstat-no" title="statement not covered" >i</span>f("string"==typeof a)<span class="cstat-no" title="statement not covered" >r._keys[e]=4,s.resolve(1,1),u(null,1,1);e</span>lse <span class="cstat-no" title="statement not covered" >if("object"===("undefined"==typeof a?"undefined":i(a))){<span class="cstat-no" title="statement not covered" >var l=a;<span class="cstat-no" title="statement not covered" >i</span>f(l.ms.indexOf(n)&gt;=0){<span class="cstat-no" title="statement not covered" >var c=l.ms.length;<span class="cstat-no" title="statement not covered" >r</span>eturn s.resolve(0,c),u(null,0,c)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar f=l.ms.length;<span class="cstat-no" title="statement not covered" >r</span>eturn l.ms.push(n),l.hsm[f]=t,Array.isArray(l.shm[t])?l.shm[t].push(f):l.shm[t]=[f],r.set(e,l)}</span>}</span></span>).then(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>r._keys[e]=4;<span class="cstat-no" title="statement not covered" >v</span>ar n=t.ms.length;<span class="cstat-no" title="statement not covered" >s</span>.resolve(1,n),u(null,1,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),u(e)}</span>),s}</span>,l.zcard=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?a:arguments[1],r=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>if(i)<span class="cstat-no" title="statement not covered" >return t.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>.reject(u),n(u)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=e.ms.filter(Boolean).length;<span class="cstat-no" title="statement not covered" >r</span>.resolve(t),n(null,t)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r}</span>,l.zcount=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("zcount",e,t,n,value,i)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return r.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar n=new Error("no such key");<span class="cstat-no" title="statement not covered" >u</span>.reject(n),i(n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var r=Object.keys(e.shm).filter(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e&gt;=t&amp;&amp;n&gt;=e}</span>).map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return e.shm[t]}</span>),s=r.map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e.length}</span>).reduce(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return e+t}</span>);<span class="cstat-no" title="statement not covered" >u</span>.resolve(s),i(null,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u}</span>,l.zrem=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)<span class="cstat-no" title="statement not covered" >r[i-1]=arguments[i];<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new o.Promise(a),s=a;<span class="cstat-no" title="statement not covered" >r</span>[r.length-1]instanceof Function&amp;&amp;(s=r.pop()),u.then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.emit("zrem",e,r,n)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar l=0;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>if(n)<span class="cstat-no" title="statement not covered" >return t.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar r=new Error("no such key");<span class="cstat-no" title="statement not covered" >u</span>.reject(r),s(r)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=new o.Promise(a),n=!0,i=!1,u=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var s,c=r[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){<span class="cstat-no" title="statement not covered" >var f=s.value,h=e.ms.indexOf(f);<span class="cstat-no" title="statement not covered" >i</span>f(h&gt;=0){<span class="cstat-no" title="statement not covered" >e.ms[f]=0;<span class="cstat-no" title="statement not covered" >v</span>ar v=e.hsm[f];<span class="cstat-no" title="statement not covered" >d</span>elete e.hsm[f];<span class="cstat-no" title="statement not covered" >v</span>ar m=e.shm[v].indexOf(f);<span class="cstat-no" title="statement not covered" >m</span>&gt;=0&amp;&amp;e.shm[v].splice(m,1),l++}</span>}</span>}</span>catch(g){<span class="cstat-no" title="statement not covered" >i=!0,u=g}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!n&amp;&amp;c["return"]&amp;&amp;c["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw u}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t.resolve(e),t}</span>).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>return t.set(e,n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.resolve(l),s(null,l)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(null,e)}</span>),u}</span>,l.zscore=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new Error("no such key");<span class="cstat-no" title="statement not covered" >i</span>.reject(u),r(u)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=e.ms.indexOf(t);<span class="cstat-no" title="statement not covered" >i</span>f(n&gt;=0){<span class="cstat-no" title="statement not covered" >var u=e.hsm[n];<span class="cstat-no" title="statement not covered" >i</span>.resolve(u),r(null,u)}</span>else{<span class="cstat-no" title="statement not covered" >var s=new Error("This member does not be in the set");<span class="cstat-no" title="statement not covered" >i</span>.reject(s),r(s)}</span>}</span>),i}</span>,l.zrange=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return this.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar n=new Error("no such key");<span class="cstat-no" title="statement not covered" >u</span>.reject(n),i(n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var r=Object.keys(e.shm).filter(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e&gt;=t&amp;&amp;n&gt;=e}</span>).map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return e.shm[t]}</span>),o=s["default"].flatten(r.map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t.map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return e.ms[t]}</span>)}</span>)).reduce(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return e.concat(t)}</span>);<span class="cstat-no" title="statement not covered" >u</span>.resolve(o),i(null,o)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u.withScore=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=0||void 0===arguments[0]?a:arguments[0],n=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var u=r.multi();<span class="cstat-no" title="statement not covered" >i</span>.forEach(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return u.zscore(e,t)}</span>),u.exec(<span class="fstat-no" title="function not covered" >function(e,r){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return t(e),n.reject(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u=r.map(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return{member:i[t],score:e[0]}}</span>);<span class="cstat-no" title="statement not covered" >n</span>.resolve(u),t(null,u)}</span>)}</span>),n}</span>,u}</span>,l.zrevrange=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return r.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar n=new Error("no such key");<span class="cstat-no" title="statement not covered" >u</span>.reject(n),i(n)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var r=Object.keys(e.shm).reverse().filter(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e&gt;=t&amp;&amp;n&gt;=e}</span>).map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return e.shm[t]}</span>),o=s["default"].flatten(r.map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return t.map(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return e.ms[t]}</span>)}</span>)).reduce(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return e.concat(t)}</span>);<span class="cstat-no" title="statement not covered" >u</span>.resolve(o),i(null,o)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u.withScore=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=0||void 0===arguments[0]?a:arguments[0],n=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var u=r.multi();<span class="cstat-no" title="statement not covered" >i</span>.forEach(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return u.zscore(e,t)}</span>),u.exec(<span class="fstat-no" title="function not covered" >function(e,r){<span class="cstat-no" title="statement not covered" ></span>if(e)<span class="cstat-no" title="statement not covered" >return t(e),n.reject(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u=r.map(<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return{member:i[t],score:e[0]}}</span>);<span class="cstat-no" title="statement not covered" >n</span>.resolve(u),t(null,u)}</span>)}</span>),n}</span>,u}</span>,l.zincrby=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >u</span>.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("zincrby",e,t,n,i)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar s=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>return s?r.zscore(e,n):void r.zadd(e,t,n,i).then(u.resolve.bind(u),u.reject.bind(u))}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return r.get(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var u=i.ms.indexOf(n),o=i.hsm[u];<span class="cstat-no" title="statement not covered" >s</span>=o+t;<span class="cstat-no" title="statement not covered" >v</span>ar a=i.shm[o].indexOf(u);<span class="cstat-no" title="statement not covered" >r</span>eturn i.shm[o].splice(a,1),i.hsm[u]=s,i.shm[s]?i.shm[s].push(u):i.shm[s]=[u],r.set(e,i)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.resolve(s),i(null,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u}</span>,l.zdecrby=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);<span class="cstat-no" title="statement not covered" >u</span>.then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return r.emit("zdecrby",keys,t,n,e)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar s=null;<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return r.zscore(e,n);<span class="cstat-no" title="statement not covered" >v</span></span>ar s=new Error("no such key");<span class="cstat-no" title="statement not covered" >u</span>.reject(s),i(s)}</span>).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return r.get(e)}</span>).then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var u=i.ms.indexOf(n),o=i.hsm[u];<span class="cstat-no" title="statement not covered" >s</span>=o-t;<span class="cstat-no" title="statement not covered" >v</span>ar a=i.shm[o].indexOf(u);<span class="cstat-no" title="statement not covered" >r</span>eturn i.shm[o].splice(a,1),i.hsm[u]=s,i.shm[s]?i.shm[s].push(u):i.shm[s]=[u],r.set(e,i)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.resolve(s),i(null,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),i(e)}</span>),u}</span>,l.zrank=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new Error("no such key");<span class="cstat-no" title="statement not covered" >i</span>.reject(u),r(u)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=Object.keys(e.shm),u=e.hsm[e.ms.indexOf(t)],s=n.indexOf(u);<span class="cstat-no" title="statement not covered" >i</span>.resolve(s),r(null,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>,l.zrevrank=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise(a);<span class="cstat-no" title="statement not covered" >r</span>eturn this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return n.get(e);<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new Error("no such key");<span class="cstat-no" title="statement not covered" >i</span>.reject(u),r(u)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=Object.keys(e.shm),u=e.hsm[e.ms.indexOf(t)],s=n.reverse().indexOf(u);<span class="cstat-no" title="statement not covered" >i</span>.resolve(s),r(null,s)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="fstat-no" title="function not covered" >function r(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;e.__esModule?e:{"default":e}}<span class="fstat-no" title="function not covered" ></span>function i(e,t){<span class="cstat-no" title="statement not covered" ></span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}<span class="cstat-no" title="statement not covered" ></span></span>var u=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>for(var n=0;n&lt;t.length;n++){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >r</span>.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}</span>}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n,r){<span class="cstat-no" title="statement not covered" ></span>return n&amp;&amp;e(t.prototype,n),r&amp;&amp;e(t,r),t}</span>}</span>();<span class="cstat-no" title="statement not covered" >O</span>bject.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >v</span>ar s=n(21),o=r(s),a=n(22),l=o["default"].noop,c={};<span class="cstat-no" title="statement not covered" >t</span>["default"]=c;<span class="cstat-no" title="statement not covered" >v</span>ar f=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(t){<span class="cstat-no" title="statement not covered" ></span>var n=this;<span class="cstat-no" title="statement not covered" >i</span>(this,e),this.queue=[],this.last=null,this.state=0,this.min=t;<span class="cstat-no" title="statement not covered" >f</span>or(var r=Object.getOwnPropertyNames(t),u=0;u&lt;r.length;u++){<span class="cstat-no" title="statement not covered" >var s=r[u];<span class="cstat-no" title="statement not covered" >"</span>function"==typeof t[s]&amp;&amp;!<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n[e]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var t=arguments.length,r=Array(t),i=0;t&gt;i;i++)<span class="cstat-no" title="statement not covered" >r[i]=arguments[i];<span class="cstat-no" title="statement not covered" >r</span></span>eturn n.queue.push({method:e,args:r}),n}</span>}</span>(s)}</span>}<span class="cstat-no" title="statement not covered" ></span>return u(e,[{key:"exec",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=arguments.length&lt;=0||void 0===arguments[0]?l:arguments[0],t=this,n=new a.Promise,r=[];<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function i(u){<span class="cstat-no" title="statement not covered" ></span>u?t.min[u.method].apply(t.min,u.args).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,n=Array(e),u=0;e&gt;u;u++)<span class="cstat-no" title="statement not covered" >n[u]=arguments[u];<span class="cstat-no" title="statement not covered" >r</span></span>.push(n),i(t.queue.shift())}</span>,<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>n.reject(t),e(t,r)}</span>):(n.resolve(r),e(null,r))}</span>(this.queue.shift()),n}</span>}]),e}</span>();<span class="cstat-no" title="statement not covered" >c</span>.multi=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return new f(this)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar h=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,u=arguments.length&lt;=2||void 0===arguments[2]?l:arguments[2];<span class="cstat-no" title="statement not covered" >i</span>(this,e);<span class="cstat-no" title="statement not covered" >v</span>ar s=null;<span class="cstat-no" title="statement not covered" >t</span>his.min=n,this.callback=u,this.result=[],this.keys={},this.promise=new a.Promise(l),this.sortFn=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return o["default"].isNumber(e)&amp;&amp;o["default"].isNumber(t)?e-t:JSON.stringify(e)&gt;JSON.stringify(t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar c=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.min.exists(t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e?r.min.get(t):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=new a.Promise(l);<span class="cstat-no" title="statement not covered" >s</span>witch(!0){case Array.isArray(e):<span class="cstat-no" title="statement not covered" >t.resolve(e);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase e.ms&amp;&amp;Array.isArray(e.ms):<span class="cstat-no" title="statement not covered" >t.resolve(e.ms);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >return new Error("content type wrong")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.result=e.sort(r.sortFn),r.result.forEach(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.keys[e]=e}</span>),r.promise.resolve(r.result),r.callback(null,r.result)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.promise.reject(e),r.callback(e)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >(</span>s=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=e.shift();<span class="cstat-no" title="statement not covered" >t</span>?(r[t]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,n=Array(e),i=0;e&gt;i;i++)<span class="cstat-no" title="statement not covered" >n[i]=arguments[i];<span class="cstat-no" title="statement not covered" >r</span></span>eturn r.promise[t].apply(r.promise,n)}</span>,s(e)):c()}</span>)(["then","done"])}<span class="cstat-no" title="statement not covered" ></span>return u(e,[{key:"by",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1],r={},i=[],u=null;<span class="cstat-no" title="statement not covered" >i</span>f(e.indexOf("-&gt;")&gt;0){<span class="cstat-no" title="statement not covered" >var s=e.indexOf("-&gt;");<span class="cstat-no" title="statement not covered" >u</span>=e.substr(s+2),e=e.substr(0,e.length-s)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this.min.keys(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>for(var u=new RegExp(e.replace("?","(.)").replace("*","(.*)")),s=0;s&lt;n.length;s++){<span class="cstat-no" title="statement not covered" >var o=u.exec(n[s])[1];<span class="cstat-no" title="statement not covered" >t</span>.result.indexOf(o)&gt;=0&amp;&amp;(r[n[s]]=o)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i=Object.keys(r),t.min.mget(i.slice())}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var u={},s=0;s&lt;e.length;s++)<span class="cstat-no" title="statement not covered" >u[JSON.stringify(e[s])]=i[s];<span class="cstat-no" title="statement not covered" >e</span></span>.sort(t.sortFn);<span class="cstat-no" title="statement not covered" >v</span>ar o=e.map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return u[JSON.stringify(e)]}</span>).map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return r[e]}</span>);<span class="cstat-no" title="statement not covered" >t</span>.result=o,t.promise.resolve(o),n(null,o)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e),t.callback(e)}</span>),this}</span>},{key:"asc",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?l:arguments[0];<span class="cstat-no" title="statement not covered" >t</span>his.sortFn=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return o["default"].isNumber(e)&amp;&amp;o["default"].isNumber(t)?e-t:JSON.stringify(e)&gt;JSON.stringify(t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar n=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>e.result=n.sort(e.sortFn),e.promise.resolve(e.result),t(null,e.result)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?n(this.result):this.promise.once("resolve",n),this}</span>},{key:"desc",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?l:arguments[0];<span class="cstat-no" title="statement not covered" >t</span>his.sortFn=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return o["default"].isNumber(e)&amp;&amp;o["default"].isNumber(t)?t-e:JSON.stringify(e)&lt;JSON.stringify(t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar n=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>e.result=n.sort(e.sortFn),e.promise.resolve(e.result),t(null,e.result)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?n(this.result):this.promise.once("resolve",n),this}</span>},{key:"get",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1],r=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>var i=[],u=null(u=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>var s=r.shift();<span class="cstat-no" title="statement not covered" >i</span>f(o["default"].isUndefined(s))<span class="cstat-no" title="statement not covered" >t.result=i,t.promise.resolve(i),n(null,i);e</span>lse <span class="cstat-no" title="statement not covered" >if(Array.isArray(s)){<span class="cstat-no" title="statement not covered" >var a=t.keys[s[0]];<span class="cstat-no" title="statement not covered" >t</span>.min.get(e.replace("*",a)).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.push(e),i.push(s),u(r)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>)}</span>else <span class="cstat-no" title="statement not covered" >if(s.substr||o["default"].isNumber(s)){<span class="cstat-no" title="statement not covered" >var a=t.keys[s];<span class="cstat-no" title="statement not covered" >t</span>.min.get(e.replace("*",a)).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.push([e]),e.substr||o["default"].isNumber(e)?t.keys[e]=a:t.keys[JSON.stringify(e)]=a,u(r)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>)}</span>}</span></span></span>)(r.slice())}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?r(this.result):this.promise.once("resolve",r),this}</span>},{key:"hget",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?l:arguments[2],i=<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var u=[],s=null(s=<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var a=i.shift();<span class="cstat-no" title="statement not covered" >i</span>f(o["default"].isUndefined(a))<span class="cstat-no" title="statement not covered" >n.result=u,n.promise.resolve(u),r(null,u);e</span>lse <span class="cstat-no" title="statement not covered" >if(Array.isArray(a)){<span class="cstat-no" title="statement not covered" >var l=n.keys[a[0]];<span class="cstat-no" title="statement not covered" >n</span>.min.hget(e.replace("*",l),t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>a.push(e),u.push(a),s(i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.promise.reject(e),r(e)}</span>)}</span>else <span class="cstat-no" title="statement not covered" >if(a.substr||o["default"].isNumber(a)){<span class="cstat-no" title="statement not covered" >var l=n.keys[a];<span class="cstat-no" title="statement not covered" >n</span>.min.hget(e.replace("*",l)).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.push([e]),e.substr||o["default"].isNumber(e)?n.keys[e]=l:n.keys[JSON.stringify(e)]=l,s(i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.promise.reject(e),r(e)}</span>)}</span>}</span></span></span>)(i.slice())}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?i(this.result):this.promise.once("resolve",i),this}</span>},{key:"limit",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?l:arguments[2],i=<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>n.result=i.splice(e,t),n.promise.resolve(n.result),r(null,n.result)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?i(this.result):this.promise.once("resolve",i),this}</span>},{key:"flatten",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?l:arguments[0];<span class="cstat-no" title="statement not covered" >i</span>f(this.promise.ended){<span class="cstat-no" title="statement not covered" >for(var n=[],r=0;r&lt;this.result.length;r++)<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;this.result[r].length;i++)<span class="cstat-no" title="statement not covered" >n.push(this.result[r][i]);<span class="cstat-no" title="statement not covered" >t</span></span></span>his.result=n,this.promise.resolve(n),t(null,n)}</span>else <span class="cstat-no" title="statement not covered" >this.promise.once("resolve",<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>for(var r=[],i=0;i&lt;n.length;i++)<span class="cstat-no" title="statement not covered" >for(var u=0;u&lt;n[i].length;u++)<span class="cstat-no" title="statement not covered" >r.push(n[i][u]);<span class="cstat-no" title="statement not covered" >e</span></span></span>.result=r,e.promise.resolve(r),t(null,r)}</span>);<span class="cstat-no" title="statement not covered" >r</span></span>eturn this}</span>},{key:"store",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?this.min.set(e,this.result).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.resolve(t.result),n(null,t.result)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>):this.promise.once("resolve",<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>t.min.set(e,r).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.resolve(r),n(null,r)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>)}</span>),this}</span>}]),e}</span>();<span class="cstat-no" title="statement not covered" >c</span>.sort=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn new h(e,void 0,t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar v=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(t,n,r,u){<span class="cstat-no" title="statement not covered" ></span>i(this,e),n=n||"*",this.cursor=t||0,this.pattern=new RegExp(n.replace("*","(.*)")),this.limit=r&gt;-1?r:10,this.end=this.cursor,this.parent=u}<span class="cstat-no" title="statement not covered" ></span>return u(e,[{key:"scan",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?l:arguments[0],n=[];<span class="cstat-no" title="statement not covered" >r</span>eturn this.parent.get("min_keys").then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>r=JSON.parse(r);<span class="cstat-no" title="statement not covered" >v</span>ar i=null,u=Object.keys(r)(i=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>var s=u[r];<span class="cstat-no" title="statement not covered" >i</span>f(s&amp;&amp;e.pattern.test(s)&amp;&amp;"min_keys"!==s){<span class="cstat-no" title="statement not covered" >if(n.push(s),++e.end-e.cursor&gt;=e.limit)<span class="cstat-no" title="statement not covered" >return t(null,n,e.end)}</span></span>else <span class="cstat-no" title="statement not covered" >if(!s)<span class="cstat-no" title="statement not covered" >return e.end=0,t(null,n,e.end);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn i(++r)}</span>)(e.cursor)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t(e)}</span>),this}</span>},{key:"match",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn this.pattern=new RegExp(e.replace("*","(.*)")),this.end=this.cursor,this.scan(t)}</span>},{key:"count",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn this.limit=e,this.end=this.cursor,this.scan(t)}</span>}]),e}</span>();<span class="cstat-no" title="statement not covered" >c</span>.scan=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1],n=new v(e,null,-1,void 0);<span class="cstat-no" title="statement not covered" >r</span>eturn n.scan(t),n}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="fstat-no" title="function not covered" >function n(e,t){<span class="cstat-no" title="statement not covered" ></span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}<span class="cstat-no" title="statement not covered" ></span></span>var r=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(e,t){<span class="cstat-no" title="statement not covered" ></span>for(var n=0;n&lt;t.length;n++){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >r</span>.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}</span>}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(t,n,r){<span class="cstat-no" title="statement not covered" ></span>return n&amp;&amp;e(t.prototype,n),r&amp;&amp;e(t,r),t}</span>}</span>();<span class="cstat-no" title="statement not covered" >O</span>bject.defineProperty(t,"__esModule",{value:!0});<span class="cstat-no" title="statement not covered" >t</span>.memStore=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(){<span class="cstat-no" title="statement not covered" ></span>n(this,e)}<span class="cstat-no" title="statement not covered" ></span>return r(e,[{key:"get",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return sessionStorage?sessionStorage.getItem(e):!1}</span>},{key:"set",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return sessionStorage?sessionStorage.setItem(e,t):!1}</span>},{key:"remove",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return sessionStorage?sessionStorage.removeItem(e):!1}</span>}]),e}</span>(),t.localStore=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function e(){<span class="cstat-no" title="statement not covered" ></span>n(this,e)}<span class="cstat-no" title="statement not covered" ></span>return r(e,[{key:"get",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return localStorage?localStorage.getItem(e):!1}</span>},{key:"set",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return localStorage?localStorage.setItem(e,t):!1}</span>},{key:"remove",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return localStorage?localStorage.removeItem(e):!1}</span>}]),e}</span>()}</span>])});</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Dec 21 2015 15:28:58 GMT+0800 (CST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
